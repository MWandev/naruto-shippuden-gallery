---
import "../styles/global.css";
import Layout from "../layouts/Layout.astro";
import db from "../../../backend/db/characters";
import Search from "../components/Search.astro";
import CardCharacter from "../components/CardCharacter.astro";
import CardsCharacterFiltered from "../components/CardsCharacterFiltered.astro";
const characters = await db.all("SELECT * FROM characters LIMIT 21");
---

<Layout title={`P√°gina de inicio`}>
  <Search />
  <CardsCharacterFiltered />
  <section
    class="grid grid-cols-[repeat(auto-fit,minmax(200px,1fr))] gap-4 mt-4"
    id="allCharacters"
  >
    {characters.map((character) => <CardCharacter {...character} />)}
  </section>

  <dialog
    open
    class="w-4/5 max-w-2xl mx-auto text-center flex flex-col items-center p-1 bg-gray-800/50 backdrop-blur-lg rounded-3xl shadow-2xl border border-gray-700/50"
  >
    <div
      class="w-full bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-3xl p-4 text-white relative overflow-hidden"
    >
      <!-- Elementos decorativos para el fondo -->
      <div
        class="absolute top-0 right-0 w-32 h-32 bg-orange-500/20 rounded-full blur-xl"
      >
      </div>
      <div
        class="absolute bottom-0 left-0 w-24 h-24 bg-blue-500/20 rounded-full blur-lg"
      >
      </div>
      <div
        class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-40 h-40 bg-gradient-to-r from-orange-500/10 to-blue-500/10 rounded-full blur-2xl"
      >
      </div>

      <header
        class="w-full max-w-2xl flex justify-center gap-3 flex-col sm:flex-row sm:text-left"
      >
        <section class="grow flex flex-col justify-center items-center gap-1.5">
          <img
            src=""
            alt=""
            class="w-full max-w-40 aspect-square bg-gray-400 rounded-full"
          />
          <h2 class="font-bold">Tobirama Senju</h2>
          <h4
            class="w-fit px-3 py-1 bg-blue-500/20 text-sm font-medium rounded-full border border-blue-500/30"
          >
            2¬∞ Hokage
          </h4>
        </section>

        <section class="grow-3 flex justify-evenly gap-3">
          <div class="flex-1 w-full">
            <div class="flex flex-col gap-3">
              <div class="flex flex-wrap gap-3">
                <div
                  class="grow bg-gray-800/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/30"
                >
                  <div class="flex items-center gap-2 mb-2">
                    <span class="w-5 h-5 text-orange-400">üë§</span>
                    <span class="text-sm text-orange-400">G√©nero</span>
                  </div>
                  <p class="font-semibold">Hombre</p>
                </div>

                <div
                  class="grow bg-gray-800/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/30"
                >
                  <div class="flex items-center gap-2 mb-2">
                    <span class="w-5 h-5 text-blue-400">üìÖ</span>
                    <span class="text-sm text-blue-400">Edad</span>
                  </div>
                  <p class="font-semibold">Desconocida</p>
                </div>
              </div>

              <div class="flex flex-wrap gap-3">
                <div
                  class="grow bg-gray-800/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/30"
                >
                  <div class="flex items-center gap-2 mb-2">
                    <span class="w-5 h-5 text-orange-400">üëë</span>
                    <span class="text-sm text-orange-400">Clan</span>
                  </div>
                  <p class="font-semibold">Senju</p>
                </div>

                <div
                  class="grow bg-gray-800/50 backdrop-blur-sm rounded-2xl p-4 border border-gray-600/30"
                >
                  <div class="flex items-center gap-2 mb-2">
                    <span class="w-5 h-5 text-red-400">‚ù§Ô∏è</span>
                    <span class="text-sm text-red-400">Estado</span>
                  </div>
                  <p class="font-semibold">Muerto</p>
                </div>
              </div>
            </div>

            <div class="mt-4 flex flex-wrap gap-2">
              <span
                class="px-3 py-1 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full text-xs font-medium shadow-lg"
              >
                Jinch≈´riki
              </span>
              <span
                class="px-3 py-1 bg-gradient-to-r from-orange-500 to-orange-600 rounded-full text-xs font-medium shadow-lg"
              >
                Sabio
              </span>
              <span
                class="px-3 py-1 bg-gradient-to-r from-gray-600 to-gray-700 rounded-full text-xs font-medium shadow-lg"
              >
                Sensorial
              </span>
            </div>
          </div>
        </section>
      </header>

      <main class="w-full max-w-2xl mt-3">
        <section
          class="flex flex-wrap gap-2 bg-gray-800/50 backdrop-blur-sm p-2 rounded-4xl border border-gray-600/30"
        >
          <button
            class="grow font-semibold cursor-pointer bg-orange-400 px-2 py-4 rounded-full"
            >Naturalezas</button
          >
          <button
            class="grow active:bg-sky-600 cursor-pointer font-semibold px-2 py-4 rounded-full"
            >Familia</button
          >
        </section>

        <section
          class="bg-gray-800/50 backdrop-blur-sm p-2 rounded-4xl border border-gray-600/30"
        >
          <h3 class="text-2xl font-semibold text-orange-400">
            Tipos de Naturalezas
          </h3>
          <div
            class="px-2 py-4 flex flex-col flex-wrap md:flex-row justify-around items-center gap-3"
          >
            <section>
              <h4>Chakra Elemental B√°sico</h4>
              <hr />
              <div class="mt-3 flex flex-wrap gap-2 justify-center">
                <article class="size-12 bg-gray-600"></article>
                <article class="size-12 bg-gray-600"></article>
                <article class="size-12 bg-gray-600"></article>
              </div>
            </section>
            <section>
              <h4>Chakra Elemental Avanzado</h4>
              <hr />
              <div class="mt-3 flex flex-wrap gap-2 justify-center">
                <article class="size-12 bg-gray-600"></article>
                <article class="size-12 bg-gray-600"></article>
                <article class="size-12 bg-gray-600"></article>
              </div>
            </section>
            <section>
              <h4>Chakra del Yin y Yang</h4>
              <hr />
              <div class="mt-3 flex flex-wrap gap-2 justify-center">
                <article class="size-12 bg-gray-600"></article>
                <article class="size-12 bg-gray-600"></article>
                <article class="size-12 bg-gray-600"></article>
              </div>
            </section>
          </div>
        </section>

        <section
          hidden
          class="bg-gray-800/50 backdrop-blur-sm p-2 rounded-4xl border border-gray-600/30"
        >
          <h3 class="text-2xl font-semibold text-sky-600">√Årbol Familiar</h3>
          <div
            class="px-2 py-4 flex flex-col flex-wrap md:flex-row justify-around items-center gap-3"
          >
            <section>
              <h4>Padres</h4>
              <hr />
              <div class="mt-3 flex flex-wrap gap-2 justify-center">
                <article class="size-12 bg-gray-600"></article>
                <article class="size-12 bg-gray-600"></article>
                <article class="size-12 bg-gray-600"></article>
              </div>
            </section>
            <section>
              <h4>Hermanos</h4>
              <hr />
              <div class="mt-3 flex flex-wrap gap-2 justify-center">
                <article class="size-12 bg-gray-600"></article>
                <article class="size-12 bg-gray-600"></article>
                <article class="size-12 bg-gray-600"></article>
              </div>
            </section>
            <section>
              <h4>Hijos</h4>
              <hr />
              <div class="mt-3 flex flex-wrap gap-2 justify-center">
                <article class="size-12 bg-gray-600"></article>
                <article class="size-12 bg-gray-600"></article>
                <article class="size-12 bg-gray-600"></article>
              </div>
            </section>
          </div>
        </section>
      </main>
    </div>

    <script>
      const allCharacters = document.getElementById("allCharacters");

      document.addEventListener("charactersFiltered", ((event: CustomEvent) => {
        if (allCharacters) {
          allCharacters.style.display =
            event.detail.characters.length > 0 ? "none" : "grid";
        }
      }) as EventListener);
    </script>
  </dialog>
</Layout>
